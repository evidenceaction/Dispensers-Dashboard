language: node_js
node_js:
- '4'
env:
  global:
  - CXX=g++-4.8
  - DEPLOY_BRANCH=master
  - secure: n16odC6bdElYRKKUGnkt5WYzIWJPXhyyncS9e4kC7h+5TmY0tcY9ZeQEfgYIgy3jH3GOae8oR+SZ6ldS5Cor0k56idtrrS48uzTrhfSXIpcO9cmr3Xvk1TVXH/blZpK/01gDh52y34eTH1xwok2VPHa6X0jeKZkYI29qHRQzUAZaL7PHfSOaEMtviHGUtQUQU8WRyhBE9BN1GNfU4b58U+8Wy+Qdtdau1ELp9OLXutcOxGxAkyCs4k8W67pvgTvK4kMfuqZTG+U8P68Tc3U6miXnYJnXjJg6eqWgDyFDW+iudjCsvDalmfs6R8k+hCx9rTAW9XZbbM8wlJynBTMhZhow6yxR/THtteyRNWtIVSU9q6n9a9fX0/HQ85wLrEVpPXtgT8kdD4riockA9C6fYV6WYsdaPHrwZDg5f0hMwc6gzBsfYL/mZhTMVBwpXUALNKfshkaKK25ZU0Ocac+kg5J5vOzU9ougECRPSNtgJGnmawELfLaoh2XsjxmXcr5ftgpdIq2ph6/cmgMQsI6JhXj6K0yj5Yna0U+iGj8IPES3vNGBxi/SUC8QU8j2QFIr8+kVgOQJ7v4hbPJWlS4sag/YYj0el25IcTwS2l8SVNyVMt+Z/oi+CcmXnAlyNA8qJYiM7qH5w1fiP8aeK4Q1Git9ciclOyyOlqQWT2KOSsY=
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
cache:
  apt: true
  directories:
  - node_modules
before_install:
- chmod +x ./.build_scripts/deploy.sh
- chmod +x ./.build_scripts/lint.sh
before_script:
- "./.build_scripts/lint.sh"
- npm test
script:
- npm run build
deploy:
  provider: script
  skip_cleanup: true
  script: ".build_scripts/deploy.sh"
  on:
    branch: "${DEPLOY_BRANCH}"
